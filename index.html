<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Overlay RPG - Ordem Paranormal</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: transparent;
    color: white;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
  }

  .overlay-container {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  /* Portrait */
  .portrait-container {
    position: relative;
    width: 200px;
    height: 300px;
  }
  .portrait-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border: 2px solid white;
    border-radius: 10px;
  }

  /* Status Numbers */
  .status-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .status {
    font-size: 36px;
    font-weight: bold;
    text-shadow: 0 0 10px #fff, 0 0 20px #ff0000;
  }
  .sanity {
    text-shadow: 0 0 10px #fff, 0 0 20px #8000ff;
  }
  .pe {
    font-size: 16px;
    text-align: center;
  }

  /* Config menu */
  .config-menu {
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(0,0,0,0.8);
    padding: 15px;
    border-radius: 10px;
    display: none;
    flex-direction: column;
    gap: 10px;
    color: white;
    z-index: 1000;
  }
  .config-menu label {
    display: block;
    margin-bottom: 5px;
  }
  .config-menu input[type="number"], .config-menu input[type="file"] {
    width: 100%;
  }

  .config-toggle {
    position: fixed;
    top: 10px;
    left: 10px;
    background: #222;
    color: white;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
    z-index: 1001;
  }

  .state-buttons button {
    margin-right: 5px;
    margin-top: 5px;
  }
</style>
</head>
<body>

<div class="overlay-container">
  <div class="portrait-container">
    <img id="portrait" src="" alt="Portrait">
  </div>
  <div class="status-container">
    <div class="status" id="vida">Vida: 0/0</div>
    <div class="status sanity" id="sanidade">Sanidade: 0/0</div>
    <div class="pe" id="pe">PE: 0/0</div>
  </div>
</div>

<div class="config-toggle">Configurações</div>

<div class="config-menu" id="configMenu">
  <h3>Configurações do Jogador</h3>

  <!-- Portrait States -->
  <label>Upload Portrait Normal:</label>
  <input type="file" id="portraitNormal" accept="image/*">
  <label>Upload Portrait Com Medo:</label>
  <input type="file" id="portraitFear" accept="image/*">
  <label>Upload Portrait Morrendo:</label>
  <input type="file" id="portraitDead" accept="image/*">

  <div class="state-buttons">
    <button onclick="setPortraitState('normal')">Normal</button>
    <button onclick="setPortraitState('fear')">Com Medo</button>
    <button onclick="setPortraitState('dead')">Morrendo</button>
  </div>

  <!-- Valores máximos -->
  <label>Vida Máxima:</label>
  <input type="number" id="vidaMax" min="1" value="20">
  <label>Sanidade Máxima:</label>
  <input type="number" id="sanidadeMax" min="1" value="20">
  <label>PE Máximo:</label>
  <input type="number" id="peMax" min="0" value="5">

  <!-- Valores atuais -->
  <label>Vida Atual:</label>
  <input type="number" id="vidaAtual" min="0" value="20">
  <label>Sanidade Atual:</label>
  <input type="number" id="sanidadeAtual" min="0" value="20">
  <label>PE Atual:</label>
  <input type="number" id="peAtual" min="0" value="5">

  <button onclick="updateValues()">Aplicar</button>
</div>

<script>
  const configToggle = document.querySelector('.config-toggle');
  const configMenu = document.getElementById('configMenu');
  const portraitImg = document.getElementById('portrait');

  // Portrait States
  let portraits = { normal: '', fear: '', dead: '' };
  let currentState = 'normal';

  // Carregar do localStorage
  if(localStorage.getItem('overlayData')){
    const data = JSON.parse(localStorage.getItem('overlayData'));
    portraits = data.portraits || portraits;
    currentState = data.currentState || 'normal';
    document.getElementById('vidaMax').value = data.vidaMax || 20;
    document.getElementById('sanidadeMax').value = data.sanidadeMax || 20;
    document.getElementById('peMax').value = data.peMax || 5;
    document.getElementById('vidaAtual').value = data.vidaAtual || data.vidaMax || 20;
    document.getElementById('sanidadeAtual').value = data.sanidadeAtual || data.sanidadeMax || 20;
    document.getElementById('peAtual').value = data.peAtual || data.peMax || 5;
  }

  function saveData() {
    localStorage.setItem('overlayData', JSON.stringify({
      portraits, currentState,
      vidaMax: document.getElementById('vidaMax').value,
      sanidadeMax: document.getElementById('sanidadeMax').value,
      peMax: document.getElementById('peMax').value,
      vidaAtual: document.getElementById('vidaAtual').value,
      sanidadeAtual: document.getElementById('sanidadeAtual').value,
      peAtual: document.getElementById('peAtual').value
    }));
  }

  function updatePortrait(fileInput, state) {
    const file = fileInput.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      portraits[state] = reader.result;
      if(currentState === state) portraitImg.src = portraits[state];
      saveData();
    }
    reader.readAsDataURL(file);
  }

  document.getElementById('portraitNormal').addEventListener('change', e => updatePortrait(e.target, 'normal'));
  document.getElementById('portraitFear').addEventListener('change', e => updatePortrait(e.target, 'fear'));
  document.getElementById('portraitDead').addEventListener('change', e => updatePortrait(e.target, 'dead'));

  function setPortraitState(state) {
    currentState = state;
    if(portraits[state]) portraitImg.src = portraits[state];
    saveData();
  }

  function updateValues() {
    const vidaMax = parseInt(document.getElementById('vidaMax').value);
    const sanidadeMax = parseInt(document.getElementById('sanidadeMax').value);
    const peMax = parseInt(document.getElementById('peMax').value);
    let vidaAtual = parseInt(document.getElementById('vidaAtual').value);
    let sanidadeAtual = parseInt(document.getElementById('sanidadeAtual').value);
    let peAtual = parseInt(document.getElementById('peAtual').value);

    if(vidaAtual > vidaMax) vidaAtual = vidaMax;
    if(sanidadeAtual > sanidadeMax) sanidadeAtual = sanidadeMax;
    if(peAtual > peMax) peAtual = peMax;

    document.getElementById('vidaAtual').value = vidaAtual;
    document.getElementById('sanidadeAtual').value = sanidadeAtual;
    document.getElementById('peAtual').value = peAtual;

    document.getElementById('vida').textContent = `Vida: ${vidaAtual}/${vidaMax}`;
    document.getElementById('sanidade').textContent = `Sanidade: ${sanidadeAtual}/${sanidadeMax}`;
    document.getElementById('pe').textContent = `PE: ${peAtual}/${peMax}`;

    saveData();
  }

  configToggle.addEventListener('click', () => {
    configMenu.style.display = configMenu.style.display === 'flex' ? 'none' : 'flex';
  });

  // Inicializa valores na tela
  updateValues();
  setPortraitState(currentState);
</script>

</body>
</html>
